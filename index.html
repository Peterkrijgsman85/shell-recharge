<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8"/>
  <title>Shell Recharge Laadstations</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; background:#f7f8fa; }
    h1 { color:#003366; }
    .card { background:#fff; padding:18px; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.08); margin-bottom:16px; max-width:800px;}
    .label { font-weight:normal; }
    .status { padding:6px 10px; border-radius:6px; display:inline-block; margin-top:6px; font-weight:bold; }
    .AVAILABLE { background:#c8f7c5; color:#1b5e20; }
    .CHARGING { background:#fbe7a1; color:#795548; }
    .UNAVAILABLE, .UNKNOWN, .OUTOFORDER { background:#f8c0c0; color:#b71c1c; }
    .error { color:#b71c1c; font-weight:bold; }
    .timestamp { color:#555; font-size:0.9em; font-weight:bold; }
  </style>
</head>
<body>
  <h1>Shell Recharge Laadstations</h1>
  <div id="stations">Laden…</div>

  <script>
    async function init() {
      try {
        const res = await fetch('/api/location.js');
        if (!res.ok) {
          const body = await res.json().catch(()=>null);
          document.getElementById('stations').innerHTML = `<div class="error">API-fout: ${res.status} ${res.statusText} — ${body?.error || ''}</div>`;
          return;
        }

        const stations = await res.json();
        const container = document.getElementById('stations');
        container.innerHTML = stations.map(s => `
          <div class="card">
            <div><span class="label">Locatie:</span> ${s.address}</div>
            <div><span class="label">Poort 1:</span> <span class="status ${s.evse_1_status}">${s.evse_1_status}</span></div>
            <div><span class="label">Laatst bijgewerkt:</span> <span class="timestamp">${s.evse_1_updated}</span></div>
            <div style="margin-top:8px;"><span class="label">Poort 2:</span> <span class="status ${s.evse_2_status}">${s.evse_2_status}</span></div>
            <div><span class="label">Laatst bijgewerkt:</span> <span class="timestamp">${s.evse_2_updated}</span></div>
          </div>
        `).join('');
      } catch (err) {
        console.error(err);
        document.getElementById('stations').innerHTML = `<div class="error">Fout bij ophalen data: ${err.message}</div>`;
      }
    }

    init();
  </script>
</body>
</html>
